#!/bin/bash

# Sync plugin files to Obsidian vault
# Copy this file to sync.sh and update the VAULT_PLUGIN_DIR path

PLUGIN_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
# Update this path to your Obsidian vault's plugins directory
VAULT_PLUGIN_DIR="$HOME/path/to/your/vault/.obsidian/plugins/obsidian-transcribe"

echo "ğŸ”¨ Building plugin..."
cd "$PLUGIN_DIR"
npm run build

if [ $? -ne 0 ]; then
    echo "âŒ Build failed! Aborting sync."
    exit 1
fi

echo "ğŸ“¦ Syncing files to Obsidian vault..."
mkdir -p "$VAULT_PLUGIN_DIR"

# Copy only the necessary runtime files
cp main.js manifest.json styles.css "$VAULT_PLUGIN_DIR/"

if [ $? -eq 0 ]; then
    echo "âœ… Plugin synced successfully!"
    echo "ğŸ“ Files copied to: $VAULT_PLUGIN_DIR"
    echo ""
    echo "ğŸ’¡ Tip: Reload Obsidian plugins (Settings â†’ Community Plugins â†’ Reload) to see changes."
else
    echo "âŒ Sync failed!"
    exit 1
fi

